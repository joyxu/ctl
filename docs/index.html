

<BODY onload="startup();">
<HTML>
If you keep seeing this message for more than a few seconds, 
either you must enable javascript, 
or I somehow introduced a javascript error.
</HTML>

<SCRIPT type="text/javascript">

// ==========================================================================
//
// C++ Talks List
//
// http://www.github.com/wovo/ctl
//
// ==========================================================================


// ==========================================================================
//
// tooling
//
// ==========================================================================

function talk_reference( talk, s ){
   return '<A HREF="' + talk.video + '" target=_blank>' + s + "</A>" 
}

function talk_thumbnail( talk ){
   return '<img src="' + talk.thumbnail + '" height="' 
      + thumbnail_size.toString() + '"' + ">"
}

function format_duration( n ){
   var date = new Date(0);
   date.setSeconds( n ); 
   var t = date.toISOString().substr(11, 8);
   n = Math.round( n / ( 24 * 60 * 60 ))
   if( n > 0 ){
      t = n.toString() + ":" + t
   }      
   return t
}

function sanitize( s ){
   return s.replace( " ", "_" ).replace( "'", "" ).replace( ".", "_" )
}


// ==========================================================================
//
// define the interface
//
// ==========================================================================

var thumbnail_size = 75

var selection_criteria = [ 
   "meeting", 
   "edition", 
   "language", 
   "speaker", 
   "tag" 
]
   
var search_criteria = [ 
   "title", 
   "speaker" 
]

checked_boxes = []
criteria_fields = []


// ==========================================================================
//
// handle url parameters
//
// ==========================================================================

function startup(){
   const queryString = window.location.search
   const urlParams = new URLSearchParams( queryString )
   for( c of search_criteria ){
      if( urlParams.has( c ) ){
         criteria_fields[ sel ] = urlParams.get( c )
      }
   }
   rewrite()
}


// ==========================================================================
//
// (re)generate the html content
//
// ==========================================================================

function rewrite(){
   var t = ""

   t += "<HTML><IMG SRC=C++.png>"
   t += "<BODY bgcolor=#94b89d><H1>C++ Talks List</H1>"
   t += "Last updated " + date_and_time + ".<BR>"
   t += "Compiled by Wouter van Ooijen (wouter@voti.nl).<BR>"
   t += "Raw data avaiulable at <A HREF=https://www.github.com/wovo/ctl>"
   t += "www.github.com/wovo/ctl</A>.<P>"
   t += "This is a list of talks about C++, Rust, embedded "
   t += "and related subjects "
   t += "I compiled from youtube playlists. "
   t += "Suggestions for other conferences to be included are welcome. "
   t += "I apologize for any inaccuracies and omissions. "
   t += "Feel free to supply corrections. "
   t += "For additions, provide youtube playlist(s), but please please "
   t += "use a consistent title format, like 'speaker, speaker : title'."
   t += "<HR>"
   
   // the checkboxes for meetings, editions, etc.
   t += "Select a specific<BR>"
   for( c of selection_criteria ){
      t += selection_html( c )
   }   
   t += "<HR>"
    
   // the text fields to search in the titles or speakers 
   t += "Search in the<BR><form>"
   for( c of search_criteria ){
      t += criterium_html( c ) + "<BR>"
   }   
   t += "</form><HR>"
    
   // the checkboxes that determine what to show 
   t += "<TABLE><TR><TD>Show</TD>"
   for( c of [ "all", "thumbnail", "speakers", "details", "tags" ] ){
      t += "<TD>" + checkbox_html( 
         "show_" + c, c == "all", "" ) + "</TD>"
   }
   t += "</TR></TABLE><HR>"
   
   // the list of talks
   var n = 0
   var t2 = ""
   var d = 0
   for( const talk of talks ) { 
      if( include_talk( talk )) {
         n += 1
         t2 += talk_html( talk )
         d += talk.duration
      }   
   }
   t += n.toString() + " entries ("
   t += format_duration( d ) + ")<BR>" + t2
  
   t += "</BODY></HTML>"
   document.open()
   document.write( t )
   document.close()
}


// ==========================================================================
//
// html for one talk
//
// ==========================================================================

function talk_html( talk, thumbnail ){
   var t = "", details = ""
   
   if( checked_boxes.show_all || checked_boxes.show_speakers ){
      details += talk.speakers.join( ", " ) + "<BR>"
   }
   
   if( checked_boxes.show_all || checked_boxes.show_details ){
      details += "ctl-" + talk.number.toString() + " "
      details += talk.meeting + " " + talk.edition + " "
      details += "(" + format_duration( talk.duration ) + ") "
      details += talk.language + "<BR>"
   }
   
   if( checked_boxes.show_all || checked_boxes.show_tags ){
      details += talk.tags.join( ", " ) + "<BR>"
   }   
   
   if( checked_boxes.show_all || checked_boxes.show_thumbnail ){
      t += "<table><tr><td>"
      t += talk_reference( talk, talk_thumbnail( talk ))
      t += "</td><td>"
      t += talk_reference( talk, talk.title ) + "<BR>"
      t += details
      t += "</td></tr></table>"
   } else {
      t += talk_reference( talk, talk.title ) + "<BR>"
      if( details != "" ){
         t += "<TABLE><TR><TD> </TD><TD>" + d + "<TD></TABLE>"
      }   
   }
    
   return t
}


// ==========================================================================
//
// a selection, with (when selected) 
// the list of options within that sections
//
// ==========================================================================

function selection_html( name ){
   var t = ""
   const sel = "select_" + name
   t += checkbox_html( 
      sel, false, " (" + window[ name + "s" ].length.toString() + ")" )
   
   if( checked_boxes[ sel ] ){
      t += "<table><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td>"
      for( c of window[ name + "s" ] ){
         c = "_include_" + c
         t += "   " + checkbox_html( c, false, "" )
      }   
      t += "</td></tr></table>"
   }
   return t
}


// ==========================================================================
//
// a checkbox
//
// ==========================================================================

function name_as_shown( s ){
   return s.replace( "select_", "" )
      .replace( "_include_", "" )
      .replace( "include_", "" )
      .replace( "show_", "" )
}

function checkbox_update( name ){
   checked_boxes[ name ] = ! checked_boxes[ name ]
   rewrite();
}

function checkbox_html( name, def, suffix ) {
   sane_name = sanitize( name )
   if( ! checked_boxes.hasOwnProperty( sane_name )){
      checked_boxes[ sane_name ] = def
   }   
   
   var t = ""
   
   t += "<div><input type=checkbox id=" + name + " name=" + name
   t += " onclick='checkbox_update( " + '"' + sane_name + '"' + ");' "
   t += ( checked_boxes[ sane_name ] ) ? "checked>" : "unchecked>"
   t += "<label for=" + sane_name + ">"
   t += name_as_shown( name ) + suffix
   t += "</label></div>"
   
   return t
}   


// ==========================================================================
//
// a search criterium
//
// ==========================================================================

function criterum_changed(){
   for( c of search_criteria ){
      const sel = "match_" + c
      criteria_fields[ sel ] = document.getElementById( "_" + sel ).value
   } 
   rewrite()  
}

function criterium_html( name ){
   var t = ""
   const sel = "match_" + name
   if( ! criteria_fields.hasOwnProperty( sel ) ){
      criteria_fields[ sel ] = ""
   }   
   const val = criteria_fields[ sel ].replace( "'", "" )
   t += "<label for=_" + sel + ">" + name + "&nbsp;&nbsp;</label>"
   t += "<input onchange='criterum_changed();' type=text size=32" 
   t += " value='" + val + "' "
   t += "   id=_" + sel + " name=_" + sel + ">"
   return t
}


// ==========================================================================
//
// determine whether a talk should be shown
//
// ==========================================================================

function include_talk( talk ){
   use = true
   
   for( c of selection_criteria ){
      if( checked_boxes[ "select_" + c ] ){
         sub_use = false
         for( tag of window[ c + "s" ] ){
            if( checked_boxes[ "_include_" + sanitize( tag ) ] ){
               var suffix = ""
               if( [ "speaker", "tag" ].includes( c ) ) suffix = "s"
               if( talk[ c + suffix ].includes( tag ) ){
                  sub_use = true
               }   
            }   
         }   
         use = use && sub_use
      }   
   }
   
   for( c of search_criteria ){
      const sel = "match_" + c
      const s = criteria_fields[ sel ].trim().toLowerCase()
      if( s != "" ){
         sub_use = false
         var suffix = ""
         if( [ "speaker" ].includes( c ) ) suffix = "s" 
         m = talk[ c + suffix ]         
         if( [ "speaker" ].includes( c ) ) m = m.join( " , " )
         if( m.toLowerCase().search( s ) > -1 ){
            sub_use = true
         }   
         use = use && sub_use
      }
   }   
      
   return use   
}

// ==========================================================================

date_and_time = "2021-10-14, 21:10:15"

var meetings = [
   "Going Native"
]

var editions = [
   "2013"
]

var languages = [
   "English"
]

var speakers = [
   "Bjarne Stroustrup",
   "rand() Considered"
]

var titles = [
   "Harmful",
   "The Essence of C++: With Examples in C++84, C++98, C++11, and C++14"
]

var tags = [
   "c++",
   "live",
   "talk"
]

const talks = [
   {
          number: 2,
      identifier: "Going Native-2013-3",
         meeting: "Going Native",
         edition: "2013",
           title: "Harmful",
        speakers: [
                     "rand() Considered"
                  ],
           video: "https://youtube.com/watch?v=2Yu8qYFS2R0",
       thumbnail: "http://img.youtube.com/vi/2Yu8qYFS2R0/0.jpg",
        duration: 1887,
            tags: [
                     "c++",
                     "live",
                     "talk"
                  ],
           level: 0,
        language: "English"
   },
   {
          number: 1,
      identifier: "Going Native-2013-1",
         meeting: "Going Native",
         edition: "2013",
           title: "The Essence of C++: With Examples in C++84, C++98, C++11, and C++14",
        speakers: [
                     "Bjarne Stroustrup"
                  ],
           video: "https://youtube.com/watch?v=IYBLXBJr0HU",
       thumbnail: "http://img.youtube.com/vi/IYBLXBJr0HU/0.jpg",
        duration: 5809,
            tags: [
                     "c++",
                     "live",
                     "talk"
                  ],
           level: 0,
        language: "English"
   }
]



</SCRIPT>
</BODY>
   
